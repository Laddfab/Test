<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Laddfab · 3D fondo + panel vidrio</title>
  <style>
    * { box-sizing: border-box; }
    html, body { margin:0; height:100%; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow-y: auto; /* Scrollbar del navegador al extremo derecho */
      background: #000; /* fallback mientras no renderiza el 3D */
    }

    :root{
      /* ====== CONTROLES DEL PANEL (puedes cambiar aquí) ====== */
      --panel-bg-r: 255;   /* ROJO   0-255 */
      --panel-bg-g: 255;   /* VERDE  0-255 */
      --panel-bg-b: 255;   /* AZUL   0-255 */
      --panel-bg-a: 0.55;  /* ALPHA  0-1   */
      /* ======================================================= */
    }

    /* 3D de fondo (el canvas va dentro) — DESKTOP */
    #three-bg {
      position: fixed; inset: 0; z-index: 0;
      pointer-events: auto; /* Permitir interacción del 3D fuera del panel */
    }

    /* Capa de contenido encima del 3D — DESKTOP */
    .page {
      position: relative; z-index: 1;
      min-height: 100vh;
      display: flex; justify-content: flex-start; align-items: stretch;
      pointer-events: none; /* CLAVE: no interceptar eventos fuera del panel */
    }

    /* Panel IZQUIERDO (vidrio pavonado) — DESKTOP */
    .panel-left {
      width: 50vw;
      padding: clamp(16px, 3vw, 36px);
      color: #111;

      background: rgba(var(--panel-bg-r), var(--panel-bg-g), var(--panel-bg-b), var(--panel-bg-a));
      backdrop-filter: blur(10px) saturate(1.1);
      -webkit-backdrop-filter: blur(10px) saturate(1.1);
      border-right: 1px solid rgba(255,255,255,0.45);
      box-shadow: 0 10px 40px rgba(0,0,0,0.08);

      pointer-events: auto; /* el panel SÍ capta eventos */
    }

    /* Cuando la opacidad es 0, hacemos el panel realmente invisible */
    .panel-left.panel-transparent {
      background: transparent !important;
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
      border-right: none !important;
      box-shadow: none !important;
    }

    .wrap { max-width: 720px; }
    .brand { font-size:clamp(28px,5vw,48px); font-weight:700; margin:0 0 12px; }
    .subtitle { font-size:clamp(16px,2.2vw,20px); margin:0 0 18px; color:#333; line-height:1.4; }

    /* Zona derecha: deja ver el 3D y NO bloquea eventos — DESKTOP */
    .spacer-right { flex: 1 1 auto; pointer-events: none; }

    /* ========== MÓVIL: 3D ARRIBA (SÓLIDO) + TEXTO ABAJO ========== */
    @media (max-width: 900px){
      /* El 3D deja de ser fondo de toda la pantalla y pasa a ser un bloque superior */
      #three-bg {
        position: relative; /* deja de ser fixed */
        inset: auto;
        z-index: 0;
        width: 100%;
        height: 52vh;        /* altura visible del 3D arriba */
        pointer-events: auto;/* puedes orbitar en el área del 3D */
        display: block;
      }

      /* La capa de contenido ya no flota sobre el 3D completo; va DEBAJO del 3D */
      .page {
        display: block;
        pointer-events: none; /* se hereda la lógica: solo el panel captura */
      }

      /* El panel ocupa TODO el ancho y es SÓLIDO (sin blur) en móvil */
      .panel-left {
        width: 100vw;
        border-right: none;
        pointer-events: auto;

        background: #ffffff;              /* sólido */
        backdrop-filter: none;
        -webkit-backdrop-filter: none;
        box-shadow: none;
      }

      .wrap { max-width: 640px; }
      .spacer-right { display: none; }    /* ya no necesitamos “lado derecho” */
    }

    /* Overlay de CARGA */
    #loading-overlay {
      position: fixed; inset: 0; z-index: 3;
      background: #0b0b0c; color: #fff;
      display:flex; flex-direction:column; align-items:center; justify-content:center; gap:12px;
      font: 14px/1.1 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      pointer-events: auto; /* mientras está visible, bloquea eventos */
    }
    #loading-bar-rail {
      width: min(520px, 52vw); height: 6px; background:#222; border-radius:999px; overflow:hidden;
    }
    #loading-bar { height:100%; width:0%; background:#4ade80; transition: width .15s linear; }
    #loading-pct { font-variant-numeric: tabular-nums; }

    /* lil-gui arriba-derecha y clickeable */
    .lil-gui.root { position: fixed !important; right: 10px; top: 10px; z-index: 2; pointer-events: auto; }
  </style>

  <!-- Import map local (Three r161) -->
  <script type="importmap">
  { "imports": { "three": "./lib/three.js-r161/build/three.module.min.js" } }
  </script>
</head>
<body>

  <!-- 3D: en desktop es fondo full-screen; en móvil es bloque superior (52vh) -->
  <div id="three-bg"></div>

  <!-- Overlay de CARGA -->
  <div id="loading-overlay">
    <div>cargando escena… <span id="loading-pct">0%</span></div>
    <div id="loading-bar-rail"><div id="loading-bar"></div></div>
    <div style="opacity:.7; font-size:12px">Laddfab · 3D</div>
  </div>

  <!-- Panel IZQUIERDO (vidrio en desktop / sólido en móvil) -->
  <main class="page">
    <section class="panel-left" id="panel-left">
      <div class="wrap">
        <h1 class="brand">Laddfab</h1>
        <p class="subtitle">Laboratorio de fabricación digital</p>

        <h2>Introducción</h2>
        <p>En desktop: 3D de fondo y panel vidrio a la izquierda. En móvil: 3D arriba (bloque sólido) y texto abajo.</p>

        <h2>Servicios</h2>
        <p>Contenido de ejemplo para probar el flujo de scroll y la lectura.</p>

        <h2>Proyectos</h2>
        <p>Más texto de ejemplo para forzar el scroll en pantallas pequeñas.</p>

        <h2>FAQ</h2>
        <p>Preguntas y respuestas de muestra. Repite o reemplaza por contenido real.</p>

        <h2>Contacto</h2>
        <p>En escritorio manipula el 3D en la zona derecha; en móvil, manipula el 3D en el bloque superior.</p>
      </div>
    </section>

    <!-- En desktop, este espacio deja ver el 3D a la derecha y permite interacción.
         En móvil se oculta. -->
    <div class="spacer-right" aria-hidden="true"></div>
  </main>

  <!-- lil-gui (global 'lil') -->
  <script src="https://cdn.jsdelivr.net/npm/lil-gui@0.20"></script>

  <!-- Módulo 3D (sin cambios) -->
  <script type="module" src="js/script6.js"></script>
</body>
</html>
